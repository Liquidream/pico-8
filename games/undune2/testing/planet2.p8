pico-8 cartridge // http://www.pico-8.com
version 33
__lua__
-- based on code from maciej szczerba
-- https://twitter.com/tonicmaciej/status/1122487932642836480

--pal({[0]=0,1,3,4,5,6,9,13,15,128,129,132,10,140,142,143},1) 


function draw_planet(pnum)
	dx=100
	dy=75

	c=(
			{[0]={0,9,11,14,15,8,8,8}, --dune
--	 [0]={0,9,3,6,12}, --dune v2 (too yellow)
	   {0,10,1,13,2,6},--7 --atreides
    {0,10,1,7,5,15,15},--ordos
	   {0,9,2,15,6,6,6} --harkonnen
	  })[pnum]
	  
	 --spare cols: 2,6,8,15
	p=({
[0]={[0]=0,1,3,4,5,6,9,13,15,128,129,132,10,140,142,143},
				{[0]=0,1,3,4,5,6,139,13,8,128,129,132,8,140,142,8},
				{[0]=0,1,8,4,5,6,12,13,15,128,129,132,10,140,142,7},
				{[0]=0,1,2,4,5,6,8,13,15,128,129,132,10,140,142,136}
	  })[pnum]
	
	g=({[0]=.5,.65,0.75,.5})[pnum]
	
	pal(p,1)
	  
	srand(6)--6
	u=cos(.5)
	v=sin(.4)
	
	--stars
	for i=1,50 do
	 pset(40+rnd(88),36+rnd(76),rnd{10,13,1})
	end
	
	-- atmosphere
	circfill(dx-1,dy-1,22,10)
	circfill(dx-1,dy-1,21,13)
	circfill(dx-1,dy-1,20,10) --if not ordos
	
	-- planet
	for x=-1,.95,.05 do 
	 for y=-1,.95,.05 do 
	  h=x*x+y*y
	  z=(1-h)^.5
	  r=x*u+y*v+g+2*((x+y)%.1)
	  r=max(min(1,z*r))
	  r=(c)[flr(r*(#c-1))+1]
	  if(h<1)pset(dx+x*20,dy+y*20,r)
	 end
	end

end

::_::
cls()
--camera(-32,-32)

palt(0,false)
palt(12,true)


draw_planet((time()\1)%4)

rect(40,36,128,112,7)
  msg=[[arrakis, known as dune. land of sand; home of
the spice melange. whoever 
controls dune controls the spice.
the emperor has proposed a 
challenge to each of the houses.]]
  ?msg,0,5,9
  ?msg,0,4,5

spr(0, 0,40,  16,16)

flip()
goto _

__gfx__
cccccccccccccc009990999ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccc00000000000099a9accccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccccc0000000000000000011accccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccccc00000000000000000000a1444cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
ccccc9000000000000000000000091447ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cc9aa000000000000000000000000091774ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
caaaa000000000000000000000000000a777cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aaaaa00000000000000000000000009aaa474ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a1aaa00000000009a900000000000000a14774cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aaaa0a90000000a00000000000000000009477cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
1aaaaa0aa0000a000000000000000000000a774ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
1a11a00a0000a00000000000000000000090477ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a1aaa0aa000a00000000000000000000000aa47ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aa1a0aaa00a00000000000000000000000091174cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aa1a01aaa000090090000000000000000000a144cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a1a0aaaa00009009000009a00000000000000a47cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a1aaaaa0000a00a900a09aa000000000000000174ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aa0aaaa0000009a00000aa000aa00000000000977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aaaaaa0000900a0a0a0a00090a0000000000009474cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00aaaa000009aaa0a9a000909a000a000000000177cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0a0000000aa1a99aaa90a9909a9009000000000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0a000009a111aaaa900a0a00aaa090000000000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a900000a111aaa0a00900a9aaa0000000900000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a000009111aa19a00aa0a99aa90a00000900000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000a9111a1a0a0a9009900000000900000000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0990a091aa11000a90999990000009900990000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
09090011aa100aa099999999999990099b09000477cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0090aaaa1190aa0a99b33eee3333bbbbbbbb009774cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
09009aa11109a00999bb33eeeeee33bb999990a77ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00aaa9aaa0aa000999bbb9b3eeeee3399bb990977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0aaaaa1a00a000999bbbbbbb3eeeeebbb99999077ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aaaa0aaa0a0000000999bbbb3eeee3999990000474cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aaa011a0a900090000009bbb3eeeeb990000000a74cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00011a0a000999900d105a9b3eeeeb90d005000a77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a111a0000099999990dd1a9b3eeeeb000d100000174ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
aa0a9a00009b333b990009993eeee90990000900a77ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0aa000a009b3ee3333bbbb333eeeeb99999999000a44cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a0009900093eeeee33333333ee3eeb9bb999990a11accccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000009b3eeeeeee3333eeee3ee39bbbbb990a74accccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
009990009beeeeeeeeeeeeeee3eee399bbbbb900a79ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00bbb9099b3eeeeeeeeeeeeee33eeeb9bbbbb9000014cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00be39099b3eeeeeeeeeeeee33eeee399bbbb900141acccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
009bb9999b3eeeeeeeeeeee3eeeeeeb99bbb9910a749cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000999b33eeeeeeeeeee3e33ee3b99bbb99119a4acccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
900000999b33eeeeeeeeeee3399b3b999bb999117749cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
9000009999b333eeeeeeeee3333bb99bbbb99914777ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999bb33eeeeeeeeeeeee333bbbb99994444cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a0000099999b3333eeeeeeeeeeeee33bb99991cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a0000099999bb333eeeeeeeeeeeeee3b99994ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000099999bbb33eeeeeeeee333e33b9999cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999bbbb33eeeeeee333333bb9999ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
9000009999bb33333eeeebbbbb9bb99999accccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999b333333eeee3bbe333b3b99994cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999b333333eeee3333ee333b9994ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
90000099999b33333eeeee333bbbbb99997ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
900000999999b333333eeee3333bb9999974cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999999b333333eeeeeeee33b99947cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000099999999b333333eeeeeeee3b99017cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000009999999999b33333eeeee333b900a4cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000999bb999999b3333333333b9900a74ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000009999bb99999999bbbbbb9999000a44ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000009999bbb99999999999000000000a74ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000999bb9bb9999999999000000000a44ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000009999bbbbb999999999000000000a44ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000009999bbbbb999999999000000000174ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000999b9bbbb999999990000000001777cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000999bbbbbbbb9999990000000001777774ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000000999bbbbbbbbb9999000000000a7497777cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
009000000999bbbbb3bbbbb99000000000047999774ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000000999b9bbb333bb9b99000000000a7999947ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0099000000999bbbb3333bbb99900000000a77999b74cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0090000000999bbbb3333bbbb90000000009779999474ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000000099999bbb333bb9b99000000000a79999b74ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00000000000999bbbb33bbbbb99000000090049999977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00090000000099b9bb33bbbb9990000099000a49999774cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0090000000009999bbbbbbbb99900000a0090049999977cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000a00000000999b9bbbbbbb9990000090099099999977cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000000090000999bbbbbbbb99900000a00a99999999774ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0000a00009000999bbbbbbb9999000000a0a990a9999377ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00009900000000999bbbbbb999000000090aa9991999b77ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000000000009999bbbbb9990000000a00aa999999977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000000a0000000999b9bbb999b0000000a009aa991999e7ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
09a0a0a000000009999bbb999b000000000909a99a99977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
00a00000000000099999bbbbbb0000000000999a0a99977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
0090000900000000999b9bbbbb000000a000909a9a99937ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
000900000a0000000999b9bbbb900000a000990a1a99947ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
900a0900a00000000999b9bbb99009000a000900a199977ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
a00a0900a000000009999b9bb9000aa00a090990aa99937ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc
